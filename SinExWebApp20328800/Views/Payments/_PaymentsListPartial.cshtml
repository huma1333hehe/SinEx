@model IEnumerable<SinExWebApp20328800.ViewModels.PaymentsListViewModel>


@if (Model.Any())
{
    <p>The following are the invoices for the specified account.</p>
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.WaybillId)
            </th>
            <th>
                @Html.ActionLink("Ship Date", "GeneratePaymentHistoryReport", new
           {
               currentShippingAccountId = ViewBag.CurrentShippingAccountId,
               currentWaybillId = ViewBag.CurrentWaybillId,
               currentStartingDate = ViewBag.CurrentStartingDate,
               currentEndingDate = ViewBag.CurrentEndingDate,
               sortOrder = ViewBag.ServiceTypeSortParm
           })
            </th>
            <th>
                @Html.ActionLink("Recipient Name", "GeneratePaymentHistoryReport", new
           {
               currentShippingAccountId = ViewBag.CurrentShippingAccountId,
               currentWaybillId = ViewBag.CurrentWaybillId,
               currentStartingDate = ViewBag.CurrentStartingDate,
               currentEndingDate = ViewBag.CurrentEndingDate,
               sortOrder = ViewBag.RecipientNameSortParm
           })
            </th>
            <th>
                @Html.ActionLink("Origin City", "GeneratePaymentHistoryReport", new
           {
               currentShippingAccountId = ViewBag.CurrentShippingAccountId,
               currentWaybillId = ViewBag.CurrentWaybillId,
               currentStartingDate = ViewBag.CurrentStartingDate,
               currentEndingDate = ViewBag.CurrentEndingDate,
               sortOrder = ViewBag.OriginSortParm
           })
            </th>
            <th>
                @Html.ActionLink("Destination City", "GeneratePaymentHistoryReport", new
           {
               currentShippingAccountId = ViewBag.CurrentShippingAccountId,
               currentWaybillId = ViewBag.CurrentWaybillId,
               currentStartingDate = ViewBag.CurrentStartingDate,
               currentEndingDate = ViewBag.CurrentEndingDate,
               sortOrder = ViewBag.DestinationSortParm
           })
            </th>
            <th>
                @Html.ActionLink("Service Type", "GeneratePaymentHistoryReport", new
           {
               currentShippingAccountId = ViewBag.CurrentShippingAccountId,
               currentWaybillId = ViewBag.CurrentWaybillId,
               currentStartingDate = ViewBag.CurrentStartingDate,
               currentEndingDate = ViewBag.CurrentEndingDate,
               sortOrder = ViewBag.ServiceTypeSortParm
           })
            </th>
            <th>
                @Html.ActionLink("Total invoice amount ", "GeneratePaymentHistoryReport", new
           {
               currentShippingAccountId = ViewBag.CurrentShippingAccountId,
               currentWaybillId = ViewBag.CurrentWaybillId,
               currentStartingDate = ViewBag.CurrentStartingDate,
               currentEndingDate = ViewBag.CurrentEndingDate,
               sortOrder = ViewBag.InvoiceAmountSortParm
           })
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PaymentDescription)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.SenderReferenceNumber)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.SenderFullName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.SenderMailingAddress)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.RecipientFullName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.RecipientDeliveryAddress)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CreditCardType)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CreditCardNumber)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AuthorizationCode)
            </th>

            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.WaybillId)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ShipDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.RecipientName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.OriginCity)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DestinationCity)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ServiceType)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CurrencyCode) @Html.DisplayFor(modelItem => item.TotalPaymentAmount)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PaymentDescription)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SenderReferenceNumber)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SenderFullName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SenderMailingAddress)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.RecipientFullName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.RecipientDeliveryAddress)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CreditCardType)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CreditCardNumber)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.AuthorizationCode)
                </td>
            </tr>
        }

    </table>
    <p></p>
    if (ViewBag.ShowShipmentPackages != null)
    {
        <table>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Packages.First().PackageType.Type)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Packages.First().ActualWeight)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Packages.First().ActualFee)
                </th>
                <th></th>
            </tr>

            @foreach (var hehe in Model.First().Packages)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => hehe.PackageType.Type)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => hehe.ActualWeight) kg
                    </td>
                    <td>
                        RMB @Html.DisplayFor(modelItem => hehe.ActualFee)
                    </td>
                </tr>
            }
            
        </table>
    }
}
else
{
    <p>No invoice record according to your searching condition</p>
}
